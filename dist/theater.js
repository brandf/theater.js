define(function(){return function(t){function a(r){if(e[r])return e[r].exports;var n=e[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}var e={};return a.m=t,a.c=e,a.p="/dist/",a(0)}([function(t,a,e){t.exports=e(1)},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(a,"__esModule",{value:!0}),a.VertexBuffer=a.PrimitiveType=a.Material=a.IndexBuffer=a.DynamicUniforms=a.Drawable=a.Pose=a.Theater=a.Stage=a.Layer=a.Behavior=a.ActorFlags=a.Actor=a.SpotLight=a.PointLight=a.DirectionalLight=a.PerspectiveCamera=a.OrthoCamera=a.Camera=a.quat=a.vec3=a.mat4=void 0;var n=e(2),o=e(12),i=r(o),u=e(16),l=r(u),s=e(17),c=r(s),f=e(18),h=r(f),M=e(19),d=r(M),m=e(20),v=r(m),p=e(13),S=r(p),x=e(14),I=r(x),b=e(21),D=r(b),F=e(22),y=r(F),g=e(23),w=r(g),E=e(24),_=r(E),P=e(15),A=r(P),O=e(25),z=r(O),R=e(28),L=r(R),T=e(26),j=r(T),N=e(29),k=r(N),q=e(27),Y=r(q),U=e(30),C=r(U);a.mat4=n.mat4,a.vec3=n.vec3,a.quat=n.quat,a.Camera=i["default"],a.OrthoCamera=l["default"],a.PerspectiveCamera=c["default"],a.DirectionalLight=h["default"],a.PointLight=d["default"],a.SpotLight=v["default"],a.Actor=S["default"],a.ActorFlags=I["default"],a.Behavior=D["default"],a.Layer=y["default"],a.Stage=w["default"],a.Theater=_["default"],a.Pose=A["default"],a.Drawable=z["default"],a.DynamicUniforms=L["default"],a.IndexBuffer=j["default"],a.Material=k["default"],a.PrimitiveType=Y["default"],a.VertexBuffer=C["default"]},function(t,a,e){"use strict";a.glMatrix=e(3),a.mat2=e(4),a.mat2d=e(5),a.mat3=e(6),a.mat4=e(7),a.quat=e(8),a.vec2=e(11),a.vec3=e(9),a.vec4=e(10)},function(t,a){"use strict";var e={};e.EPSILON=1e-6,e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,e.ENABLE_SIMD=!1,e.SIMD_AVAILABLE=e.ARRAY_TYPE===Float32Array&&"SIMD"in void 0,e.USE_SIMD=e.ENABLE_SIMD&&e.SIMD_AVAILABLE,e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t};var r=Math.PI/180;e.toRadian=function(t){return t*r},e.equals=function(t,a){return Math.abs(t-a)<=e.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=e},function(t,a,e){"use strict";var r=e(3),n={};n.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var a=new r.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,a,e,n){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=e,o[3]=n,o},n.set=function(t,a,e,r,n){return t[0]=a,t[1]=e,t[2]=r,t[3]=n,t},n.transpose=function(t,a){if(t===a){var e=a[1];t[1]=a[2],t[2]=e}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},n.invert=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=e*o-n*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-n*i,t[3]=e*i,t):null},n.adjoint=function(t,a){var e=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=e,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=e[0],l=e[1],s=e[2],c=e[3];return t[0]=r*u+o*l,t[1]=n*u+i*l,t[2]=r*s+o*c,t[3]=n*s+i*c,t},n.mul=n.multiply,n.rotate=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l+o*u,t[1]=n*l+i*u,t[2]=r*-u+o*l,t[3]=n*-u+i*l,t},n.scale=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=e[0],l=e[1];return t[0]=r*u,t[1]=n*u,t[2]=o*l,t[3]=i*l,t},n.fromRotation=function(t,a){var e=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,a,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,a,e]},n.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t},n.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t},n.sub=n.subtract,n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},n.equals=function(t,a){var e=t[0],n=t[1],o=t[2],i=t[3],u=a[0],l=a[1],s=a[2],c=a[3];return Math.abs(e-u)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},n.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t},n.multiplyScalarAndAdd=function(t,a,e,r){return t[0]=a[0]+e[0]*r,t[1]=a[1]+e[1]*r,t[2]=a[2]+e[2]*r,t[3]=a[3]+e[3]*r,t},t.exports=n},function(t,a,e){"use strict";var r=e(3),n={};n.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var a=new r.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,a,e,n,o,i){var u=new r.ARRAY_TYPE(6);return u[0]=t,u[1]=a,u[2]=e,u[3]=n,u[4]=o,u[5]=i,u},n.set=function(t,a,e,r,n,o,i){return t[0]=a,t[1]=e,t[2]=r,t[3]=n,t[4]=o,t[5]=i,t},n.invert=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=a[4],u=a[5],l=e*o-r*n;return l?(l=1/l,t[0]=o*l,t[1]=-r*l,t[2]=-n*l,t[3]=e*l,t[4]=(n*u-o*i)*l,t[5]=(r*i-e*u)*l,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=e[0],c=e[1],f=e[2],h=e[3],M=e[4],d=e[5];return t[0]=r*s+o*c,t[1]=n*s+i*c,t[2]=r*f+o*h,t[3]=n*f+i*h,t[4]=r*M+o*d+u,t[5]=n*M+i*d+l,t},n.mul=n.multiply,n.rotate=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=Math.sin(e),c=Math.cos(e);return t[0]=r*c+o*s,t[1]=n*c+i*s,t[2]=r*-s+o*c,t[3]=n*-s+i*c,t[4]=u,t[5]=l,t},n.scale=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=e[0],c=e[1];return t[0]=r*s,t[1]=n*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},n.translate=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=e[0],c=e[1];return t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=r*s+o*c+u,t[5]=n*s+i*c+l,t},n.fromRotation=function(t,a){var e=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t[4]=a[4]+e[4],t[5]=a[5]+e[5],t},n.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t[4]=a[4]-e[4],t[5]=a[5]-e[5],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*e,t[5]=a[5]*e,t},n.multiplyScalarAndAdd=function(t,a,e,r){return t[0]=a[0]+e[0]*r,t[1]=a[1]+e[1]*r,t[2]=a[2]+e[2]*r,t[3]=a[3]+e[3]*r,t[4]=a[4]+e[4]*r,t[5]=a[5]+e[5]*r,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},n.equals=function(t,a){var e=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=a[0],c=a[1],f=a[2],h=a[3],M=a[4],d=a[5];return Math.abs(e-s)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-d)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))},t.exports=n},function(t,a,e){"use strict";var r=e(3),n={};n.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},n.clone=function(t){var a=new r.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},n.fromValues=function(t,a,e,n,o,i,u,l,s){var c=new r.ARRAY_TYPE(9);return c[0]=t,c[1]=a,c[2]=e,c[3]=n,c[4]=o,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},n.set=function(t,a,e,r,n,o,i,u,l,s){return t[0]=a,t[1]=e,t[2]=r,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,a){if(t===a){var e=a[1],r=a[2],n=a[5];t[1]=a[3],t[2]=a[6],t[3]=e,t[5]=a[7],t[6]=r,t[7]=n}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},n.invert=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],f=c*i-u*s,h=-c*o+u*l,M=s*o-i*l,d=e*f+r*h+n*M;return d?(d=1/d,t[0]=f*d,t[1]=(-c*r+n*s)*d,t[2]=(u*r-n*i)*d,t[3]=h*d,t[4]=(c*e-n*l)*d,t[5]=(-u*e+n*o)*d,t[6]=M*d,t[7]=(-s*e+r*l)*d,t[8]=(i*e-r*o)*d,t):null},n.adjoint=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8];return t[0]=i*c-u*s,t[1]=n*s-r*c,t[2]=r*u-n*i,t[3]=u*l-o*c,t[4]=e*c-n*l,t[5]=n*o-e*u,t[6]=o*s-i*l,t[7]=r*l-e*s,t[8]=e*i-r*o,t},n.determinant=function(t){var a=t[0],e=t[1],r=t[2],n=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return a*(s*o-i*l)+e*(-s*n+i*u)+r*(l*n-o*u)},n.multiply=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],f=a[8],h=e[0],M=e[1],d=e[2],m=e[3],v=e[4],p=e[5],S=e[6],x=e[7],I=e[8];return t[0]=h*r+M*i+d*s,t[1]=h*n+M*u+d*c,t[2]=h*o+M*l+d*f,t[3]=m*r+v*i+p*s,t[4]=m*n+v*u+p*c,t[5]=m*o+v*l+p*f,t[6]=S*r+x*i+I*s,t[7]=S*n+x*u+I*c,t[8]=S*o+x*l+I*f,t},n.mul=n.multiply,n.translate=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],f=a[8],h=e[0],M=e[1];return t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=h*r+M*i+s,t[7]=h*n+M*u+c,t[8]=h*o+M*l+f,t},n.rotate=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],f=a[8],h=Math.sin(e),M=Math.cos(e);return t[0]=M*r+h*i,t[1]=M*n+h*u,t[2]=M*o+h*l,t[3]=M*i-h*r,t[4]=M*u-h*n,t[5]=M*l-h*o,t[6]=s,t[7]=c,t[8]=f,t},n.scale=function(t,a,e){var r=e[0],n=e[1];return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=n*a[3],t[4]=n*a[4],t[5]=n*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},n.fromRotation=function(t,a){var e=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},n.fromQuat=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=e+e,u=r+r,l=n+n,s=e*i,c=r*i,f=r*u,h=n*i,M=n*u,d=n*l,m=o*i,v=o*u,p=o*l;return t[0]=1-f-d,t[3]=c-p,t[6]=h+v,t[1]=c+p,t[4]=1-s-d,t[7]=M-m,t[2]=h-v,t[5]=M+m,t[8]=1-s-f,t},n.normalFromMat4=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],f=a[9],h=a[10],M=a[11],d=a[12],m=a[13],v=a[14],p=a[15],S=e*u-r*i,x=e*l-n*i,I=e*s-o*i,b=r*l-n*u,D=r*s-o*u,F=n*s-o*l,y=c*m-f*d,g=c*v-h*d,w=c*p-M*d,E=f*v-h*m,_=f*p-M*m,P=h*p-M*v,A=S*P-x*_+I*E+b*w-D*g+F*y;return A?(A=1/A,t[0]=(u*P-l*_+s*E)*A,t[1]=(l*w-i*P-s*g)*A,t[2]=(i*_-u*w+s*y)*A,t[3]=(n*_-r*P-o*E)*A,t[4]=(e*P-n*w+o*g)*A,t[5]=(r*w-e*_-o*y)*A,t[6]=(m*F-v*D+p*b)*A,t[7]=(v*I-d*F-p*x)*A,t[8]=(d*D-m*I+p*S)*A,t):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t[4]=a[4]+e[4],t[5]=a[5]+e[5],t[6]=a[6]+e[6],t[7]=a[7]+e[7],t[8]=a[8]+e[8],t},n.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t[4]=a[4]-e[4],t[5]=a[5]-e[5],t[6]=a[6]-e[6],t[7]=a[7]-e[7],t[8]=a[8]-e[8],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*e,t},n.multiplyScalarAndAdd=function(t,a,e,r){return t[0]=a[0]+e[0]*r,t[1]=a[1]+e[1]*r,t[2]=a[2]+e[2]*r,t[3]=a[3]+e[3]*r,t[4]=a[4]+e[4]*r,t[5]=a[5]+e[5]*r,t[6]=a[6]+e[6]*r,t[7]=a[7]+e[7]*r,t[8]=a[8]+e[8]*r,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},n.equals=function(t,a){var e=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=a[0],M=a[1],d=a[2],m=a[3],v=a[4],p=a[5],S=t[6],x=a[7],I=a[8];return Math.abs(e-h)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-M)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-m)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-p)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(s-S)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-x)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-I)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))},t.exports=n},function(t,a,e){"use strict";var r=e(3),n={scalar:{},SIMD:{}};n.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var a=new r.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.fromValues=function(t,a,e,n,o,i,u,l,s,c,f,h,M,d,m,v){var p=new r.ARRAY_TYPE(16);return p[0]=t,p[1]=a,p[2]=e,p[3]=n,p[4]=o,p[5]=i,p[6]=u,p[7]=l,p[8]=s,p[9]=c,p[10]=f,p[11]=h,p[12]=M,p[13]=d,p[14]=m,p[15]=v,p},n.set=function(t,a,e,r,n,o,i,u,l,s,c,f,h,M,d,m,v){return t[0]=a,t[1]=e,t[2]=r,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=f,t[11]=h,t[12]=M,t[13]=d,t[14]=m,t[15]=v,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.scalar.transpose=function(t,a){if(t===a){var e=a[1],r=a[2],n=a[3],o=a[6],i=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=e,t[6]=a[9],t[7]=a[13],t[8]=r,t[9]=o,t[11]=a[14],t[12]=n,t[13]=i,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},n.SIMD.transpose=function(t,a){var e,r,n,o,i,u,l,s,c,f;return e=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),n=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.shuffle(e,r,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(e,r,2,3,6,7),u=SIMD.Float32x4.shuffle(n,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),f=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,f),t},n.transpose=r.USE_SIMD?n.SIMD.transpose:n.scalar.transpose,n.scalar.invert=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],f=a[9],h=a[10],M=a[11],d=a[12],m=a[13],v=a[14],p=a[15],S=e*u-r*i,x=e*l-n*i,I=e*s-o*i,b=r*l-n*u,D=r*s-o*u,F=n*s-o*l,y=c*m-f*d,g=c*v-h*d,w=c*p-M*d,E=f*v-h*m,_=f*p-M*m,P=h*p-M*v,A=S*P-x*_+I*E+b*w-D*g+F*y;return A?(A=1/A,t[0]=(u*P-l*_+s*E)*A,t[1]=(n*_-r*P-o*E)*A,t[2]=(m*F-v*D+p*b)*A,t[3]=(h*D-f*F-M*b)*A,t[4]=(l*w-i*P-s*g)*A,t[5]=(e*P-n*w+o*g)*A,t[6]=(v*I-d*F-p*x)*A,t[7]=(c*F-h*I+M*x)*A,t[8]=(i*_-u*w+s*y)*A,t[9]=(r*w-e*_-o*y)*A,t[10]=(d*D-m*I+p*S)*A,t[11]=(f*I-c*D-M*S)*A,t[12]=(u*g-i*E-l*y)*A,t[13]=(e*E-r*g+n*y)*A,t[14]=(m*x-d*b-v*S)*A,t[15]=(c*b-f*x+h*S)*A,t):null},n.SIMD.invert=function(t,a){var e,r,n,o,i,u,l,s,c,f,h=SIMD.Float32x4.load(a,0),M=SIMD.Float32x4.load(a,4),d=SIMD.Float32x4.load(a,8),m=SIMD.Float32x4.load(a,12);return i=SIMD.Float32x4.shuffle(h,M,0,1,4,5),r=SIMD.Float32x4.shuffle(d,m,0,1,4,5),e=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(h,M,2,3,6,7),o=SIMD.Float32x4.shuffle(d,m,2,3,6,7),n=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),l=SIMD.Float32x4.mul(e,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(e,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),u),s=SIMD.Float32x4.mul(e,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(e,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(e,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(e,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),c),f=SIMD.Float32x4.mul(e,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),i=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(i,i))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(f,c)),t):null},n.invert=r.USE_SIMD?n.SIMD.invert:n.scalar.invert,n.scalar.adjoint=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=a[4],u=a[5],l=a[6],s=a[7],c=a[8],f=a[9],h=a[10],M=a[11],d=a[12],m=a[13],v=a[14],p=a[15];return t[0]=u*(h*p-M*v)-f*(l*p-s*v)+m*(l*M-s*h),t[1]=-(r*(h*p-M*v)-f*(n*p-o*v)+m*(n*M-o*h)),t[2]=r*(l*p-s*v)-u*(n*p-o*v)+m*(n*s-o*l),t[3]=-(r*(l*M-s*h)-u*(n*M-o*h)+f*(n*s-o*l)),t[4]=-(i*(h*p-M*v)-c*(l*p-s*v)+d*(l*M-s*h)),t[5]=e*(h*p-M*v)-c*(n*p-o*v)+d*(n*M-o*h),t[6]=-(e*(l*p-s*v)-i*(n*p-o*v)+d*(n*s-o*l)),t[7]=e*(l*M-s*h)-i*(n*M-o*h)+c*(n*s-o*l),t[8]=i*(f*p-M*m)-c*(u*p-s*m)+d*(u*M-s*f),t[9]=-(e*(f*p-M*m)-c*(r*p-o*m)+d*(r*M-o*f)),t[10]=e*(u*p-s*m)-i*(r*p-o*m)+d*(r*s-o*u),t[11]=-(e*(u*M-s*f)-i*(r*M-o*f)+c*(r*s-o*u)),t[12]=-(i*(f*v-h*m)-c*(u*v-l*m)+d*(u*h-l*f)),t[13]=e*(f*v-h*m)-c*(r*v-n*m)+d*(r*h-n*f),t[14]=-(e*(u*v-l*m)-i*(r*v-n*m)+d*(r*l-n*u)),t[15]=e*(u*h-l*f)-i*(r*h-n*f)+c*(r*l-n*u),t},n.SIMD.adjoint=function(t,a){var e,r,n,o,i,u,l,s,c,f,h,M,d,e=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),n=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12);return c=SIMD.Float32x4.shuffle(e,r,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(e,r,2,3,6,7),s=SIMD.Float32x4.shuffle(n,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(u,c),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),M),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),SIMD.Float32x4.store(t,0,f),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,d),t},n.adjoint=r.USE_SIMD?n.SIMD.adjoint:n.scalar.adjoint,n.determinant=function(t){var a=t[0],e=t[1],r=t[2],n=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],f=t[10],h=t[11],M=t[12],d=t[13],m=t[14],v=t[15],p=a*i-e*o,S=a*u-r*o,x=a*l-n*o,I=e*u-r*i,b=e*l-n*i,D=r*l-n*u,F=s*d-c*M,y=s*m-f*M,g=s*v-h*M,w=c*m-f*d,E=c*v-h*d,_=f*v-h*m;return p*_-S*E+x*w+I*g-b*y+D*F},n.SIMD.multiply=function(t,a,e){var r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.load(e,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(e,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var f=SIMD.Float32x4.load(e,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));SIMD.Float32x4.store(t,8,h);var M=SIMD.Float32x4.load(e,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,d),t},n.scalar.multiply=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],f=a[8],h=a[9],M=a[10],d=a[11],m=a[12],v=a[13],p=a[14],S=a[15],x=e[0],I=e[1],b=e[2],D=e[3];return t[0]=x*r+I*u+b*f+D*m,t[1]=x*n+I*l+b*h+D*v,t[2]=x*o+I*s+b*M+D*p,t[3]=x*i+I*c+b*d+D*S,x=e[4],I=e[5],b=e[6],D=e[7],t[4]=x*r+I*u+b*f+D*m,t[5]=x*n+I*l+b*h+D*v,t[6]=x*o+I*s+b*M+D*p,t[7]=x*i+I*c+b*d+D*S,x=e[8],I=e[9],b=e[10],D=e[11],t[8]=x*r+I*u+b*f+D*m,t[9]=x*n+I*l+b*h+D*v,t[10]=x*o+I*s+b*M+D*p,t[11]=x*i+I*c+b*d+D*S,x=e[12],I=e[13],b=e[14],D=e[15],t[12]=x*r+I*u+b*f+D*m,t[13]=x*n+I*l+b*h+D*v,t[14]=x*o+I*s+b*M+D*p,t[15]=x*i+I*c+b*d+D*S,t},n.multiply=r.USE_SIMD?n.SIMD.multiply:n.scalar.multiply,n.mul=n.multiply,n.scalar.translate=function(t,a,e){var r,n,o,i,u,l,s,c,f,h,M,d,m=e[0],v=e[1],p=e[2];return a===t?(t[12]=a[0]*m+a[4]*v+a[8]*p+a[12],t[13]=a[1]*m+a[5]*v+a[9]*p+a[13],t[14]=a[2]*m+a[6]*v+a[10]*p+a[14],t[15]=a[3]*m+a[7]*v+a[11]*p+a[15]):(r=a[0],n=a[1],o=a[2],i=a[3],u=a[4],l=a[5],s=a[6],c=a[7],f=a[8],h=a[9],M=a[10],d=a[11],t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=c,t[8]=f,t[9]=h,t[10]=M,t[11]=d,t[12]=r*m+u*v+f*p+a[12],t[13]=n*m+l*v+h*p+a[13],t[14]=o*m+s*v+M*p+a[14],t[15]=i*m+c*v+d*p+a[15]),t},n.SIMD.translate=function(t,a,e){var r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4(e[0],e[1],e[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(r,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,l),t},n.translate=r.USE_SIMD?n.SIMD.translate:n.scalar.translate,n.scalar.scale=function(t,a,e){var r=e[0],n=e[1],o=e[2];return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.SIMD.scale=function(t,a,e){var r,n,o,i=SIMD.Float32x4(e[0],e[1],e[2],0);return r=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),n=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.scale=r.USE_SIMD?n.SIMD.scale:n.scalar.scale,n.rotate=function(t,a,e,n){var o,i,u,l,s,c,f,h,M,d,m,v,p,S,x,I,b,D,F,y,g,w,E,_,P=n[0],A=n[1],O=n[2],z=Math.sqrt(P*P+A*A+O*O);return Math.abs(z)<r.EPSILON?null:(z=1/z,P*=z,A*=z,O*=z,o=Math.sin(e),i=Math.cos(e),u=1-i,l=a[0],s=a[1],c=a[2],f=a[3],h=a[4],M=a[5],d=a[6],m=a[7],v=a[8],p=a[9],S=a[10],x=a[11],I=P*P*u+i,b=A*P*u+O*o,D=O*P*u-A*o,F=P*A*u-O*o,y=A*A*u+i,g=O*A*u+P*o,w=P*O*u+A*o,E=A*O*u-P*o,_=O*O*u+i,t[0]=l*I+h*b+v*D,t[1]=s*I+M*b+p*D,t[2]=c*I+d*b+S*D,t[3]=f*I+m*b+x*D,t[4]=l*F+h*y+v*g,t[5]=s*F+M*y+p*g,t[6]=c*F+d*y+S*g,t[7]=f*F+m*y+x*g,t[8]=l*w+h*E+v*_,t[9]=s*w+M*E+p*_,t[10]=c*w+d*E+S*_,t[11]=f*w+m*E+x*_,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},n.scalar.rotateX=function(t,a,e){var r=Math.sin(e),n=Math.cos(e),o=a[4],i=a[5],u=a[6],l=a[7],s=a[8],c=a[9],f=a[10],h=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*n+s*r,t[5]=i*n+c*r,t[6]=u*n+f*r,t[7]=l*n+h*r,t[8]=s*n-o*r,t[9]=c*n-i*r,t[10]=f*n-u*r,t[11]=h*n-l*r,t},n.SIMD.rotateX=function(t,a,e){var r=SIMD.Float32x4.splat(Math.sin(e)),n=SIMD.Float32x4.splat(Math.cos(e));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,4),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,r))),t},n.rotateX=r.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX,n.scalar.rotateY=function(t,a,e){var r=Math.sin(e),n=Math.cos(e),o=a[0],i=a[1],u=a[2],l=a[3],s=a[8],c=a[9],f=a[10],h=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*n-s*r,t[1]=i*n-c*r,t[2]=u*n-f*r,t[3]=l*n-h*r,t[8]=o*r+s*n,t[9]=i*r+c*n,t[10]=u*r+f*n,t[11]=l*r+h*n,t},n.SIMD.rotateY=function(t,a,e){var r=SIMD.Float32x4.splat(Math.sin(e)),n=SIMD.Float32x4.splat(Math.cos(e));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),t},n.rotateY=r.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY,n.scalar.rotateZ=function(t,a,e){var r=Math.sin(e),n=Math.cos(e),o=a[0],i=a[1],u=a[2],l=a[3],s=a[4],c=a[5],f=a[6],h=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*n+s*r,t[1]=i*n+c*r,t[2]=u*n+f*r,t[3]=l*n+h*r,t[4]=s*n-o*r,t[5]=c*n-i*r,t[6]=f*n-u*r,t[7]=h*n-l*r,t},n.SIMD.rotateZ=function(t,a,e){var r=SIMD.Float32x4.splat(Math.sin(e)),n=SIMD.Float32x4.splat(Math.cos(e));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,r))),t},n.rotateZ=r.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ,n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,a,e){var n,o,i,u=e[0],l=e[1],s=e[2],c=Math.sqrt(u*u+l*l+s*s);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,l*=c,s*=c,n=Math.sin(a),o=Math.cos(a),i=1-o,t[0]=u*u*i+o,t[1]=l*u*i+s*n,t[2]=s*u*i-l*n,t[3]=0,t[4]=u*l*i-s*n,t[5]=l*l*i+o,t[6]=s*l*i+u*n,t[7]=0,t[8]=u*s*i+l*n,t[9]=l*s*i-u*n,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,a){var e=Math.sin(a),r=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,a){var e=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,a){var e=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=r+r,l=n+n,s=o+o,c=r*u,f=r*l,h=r*s,M=n*l,d=n*s,m=o*s,v=i*u,p=i*l,S=i*s;return t[0]=1-(M+m),t[1]=f+S,
t[2]=h-p,t[3]=0,t[4]=f-S,t[5]=1-(c+m),t[6]=d+v,t[7]=0,t[8]=h+p,t[9]=d-v,t[10]=1-(c+M),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},n.getRotation=function(t,a){var e=a[0]+a[5]+a[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(a[6]-a[9])/r,t[1]=(a[8]-a[2])/r,t[2]=(a[1]-a[4])/r):a[0]>a[5]&a[0]>a[10]?(r=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/r,t[0]=.25*r,t[1]=(a[1]+a[4])/r,t[2]=(a[8]+a[2])/r):a[5]>a[10]?(r=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/r,t[0]=(a[1]+a[4])/r,t[1]=.25*r,t[2]=(a[6]+a[9])/r):(r=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/r,t[0]=(a[8]+a[2])/r,t[1]=(a[6]+a[9])/r,t[2]=.25*r),t},n.fromRotationTranslationScale=function(t,a,e,r){var n=a[0],o=a[1],i=a[2],u=a[3],l=n+n,s=o+o,c=i+i,f=n*l,h=n*s,M=n*c,d=o*s,m=o*c,v=i*c,p=u*l,S=u*s,x=u*c,I=r[0],b=r[1],D=r[2];return t[0]=(1-(d+v))*I,t[1]=(h+x)*I,t[2]=(M-S)*I,t[3]=0,t[4]=(h-x)*b,t[5]=(1-(f+v))*b,t[6]=(m+p)*b,t[7]=0,t[8]=(M+S)*D,t[9]=(m-p)*D,t[10]=(1-(f+d))*D,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,a,e,r,n){var o=a[0],i=a[1],u=a[2],l=a[3],s=o+o,c=i+i,f=u+u,h=o*s,M=o*c,d=o*f,m=i*c,v=i*f,p=u*f,S=l*s,x=l*c,I=l*f,b=r[0],D=r[1],F=r[2],y=n[0],g=n[1],w=n[2];return t[0]=(1-(m+p))*b,t[1]=(M+I)*b,t[2]=(d-x)*b,t[3]=0,t[4]=(M-I)*D,t[5]=(1-(h+p))*D,t[6]=(v+S)*D,t[7]=0,t[8]=(d+x)*F,t[9]=(v-S)*F,t[10]=(1-(h+m))*F,t[11]=0,t[12]=e[0]+y-(t[0]*y+t[4]*g+t[8]*w),t[13]=e[1]+g-(t[1]*y+t[5]*g+t[9]*w),t[14]=e[2]+w-(t[2]*y+t[6]*g+t[10]*w),t[15]=1,t},n.fromQuat=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=e+e,u=r+r,l=n+n,s=e*i,c=r*i,f=r*u,h=n*i,M=n*u,d=n*l,m=o*i,v=o*u,p=o*l;return t[0]=1-f-d,t[1]=c+p,t[2]=h-v,t[3]=0,t[4]=c-p,t[5]=1-s-d,t[6]=M+m,t[7]=0,t[8]=h+v,t[9]=M-m,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,a,e,r,n,o,i){var u=1/(e-a),l=1/(n-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(e+a)*u,t[9]=(n+r)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},n.perspective=function(t,a,e,r,n){var o=1/Math.tan(a/2),i=1/(r-n);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*r*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,a,e,r){var n=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),i=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(n+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((i-u)*l*.5),t[9]=(n-o)*s*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},n.ortho=function(t,a,e,r,n,o,i){var u=1/(a-e),l=1/(r-n),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(a+e)*u,t[13]=(n+r)*l,t[14]=(i+o)*s,t[15]=1,t},n.lookAt=function(t,a,e,o){var i,u,l,s,c,f,h,M,d,m,v=a[0],p=a[1],S=a[2],x=o[0],I=o[1],b=o[2],D=e[0],F=e[1],y=e[2];return Math.abs(v-D)<r.EPSILON&&Math.abs(p-F)<r.EPSILON&&Math.abs(S-y)<r.EPSILON?n.identity(t):(h=v-D,M=p-F,d=S-y,m=1/Math.sqrt(h*h+M*M+d*d),h*=m,M*=m,d*=m,i=I*d-b*M,u=b*h-x*d,l=x*M-I*h,m=Math.sqrt(i*i+u*u+l*l),m?(m=1/m,i*=m,u*=m,l*=m):(i=0,u=0,l=0),s=M*l-d*u,c=d*i-h*l,f=h*u-M*i,m=Math.sqrt(s*s+c*c+f*f),m?(m=1/m,s*=m,c*=m,f*=m):(s=0,c=0,f=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=u,t[5]=c,t[6]=M,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=-(i*v+u*p+l*S),t[13]=-(s*v+c*p+f*S),t[14]=-(h*v+M*p+d*S),t[15]=1,t)},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t[4]=a[4]+e[4],t[5]=a[5]+e[5],t[6]=a[6]+e[6],t[7]=a[7]+e[7],t[8]=a[8]+e[8],t[9]=a[9]+e[9],t[10]=a[10]+e[10],t[11]=a[11]+e[11],t[12]=a[12]+e[12],t[13]=a[13]+e[13],t[14]=a[14]+e[14],t[15]=a[15]+e[15],t},n.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t[4]=a[4]-e[4],t[5]=a[5]-e[5],t[6]=a[6]-e[6],t[7]=a[7]-e[7],t[8]=a[8]-e[8],t[9]=a[9]-e[9],t[10]=a[10]-e[10],t[11]=a[11]-e[11],t[12]=a[12]-e[12],t[13]=a[13]-e[13],t[14]=a[14]-e[14],t[15]=a[15]-e[15],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12]*e,t[13]=a[13]*e,t[14]=a[14]*e,t[15]=a[15]*e,t},n.multiplyScalarAndAdd=function(t,a,e,r){return t[0]=a[0]+e[0]*r,t[1]=a[1]+e[1]*r,t[2]=a[2]+e[2]*r,t[3]=a[3]+e[3]*r,t[4]=a[4]+e[4]*r,t[5]=a[5]+e[5]*r,t[6]=a[6]+e[6]*r,t[7]=a[7]+e[7]*r,t[8]=a[8]+e[8]*r,t[9]=a[9]+e[9]*r,t[10]=a[10]+e[10]*r,t[11]=a[11]+e[11]*r,t[12]=a[12]+e[12]*r,t[13]=a[13]+e[13]*r,t[14]=a[14]+e[14]*r,t[15]=a[15]+e[15]*r,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},n.equals=function(t,a){var e=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=t[9],M=t[10],d=t[11],m=t[12],v=t[13],p=t[14],S=t[15],x=a[0],I=a[1],b=a[2],D=a[3],F=a[4],y=a[5],g=a[6],w=a[7],E=a[8],_=a[9],P=a[10],A=a[11],O=a[12],z=a[13],R=a[14],L=a[15];return Math.abs(e-x)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(n-I)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(o-b)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-D)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(u-F)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(l-y)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(s-g)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-w)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-_)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(M-P)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(d-A)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(m-O)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(v-z)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(p-R)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(S-L)<=r.EPSILON*Math.max(1,Math.abs(S),Math.abs(L))},t.exports=n},function(t,a,e){"use strict";var r=e(3),n=e(6),o=e(9),i=e(10),u={};u.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),a=o.fromValues(1,0,0),e=o.fromValues(0,1,0);return function(r,n,i){var l=o.dot(n,i);return l<-.999999?(o.cross(t,a,n),o.length(t)<1e-6&&o.cross(t,e,n),o.normalize(t,t),u.setAxisAngle(r,t,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,n,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+l,u.normalize(r,r))}}(),u.setAxes=function(){var t=n.create();return function(a,e,r,n){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],u.normalize(a,u.fromMat3(a,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,a,e){e=.5*e;var r=Math.sin(e);return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=Math.cos(e),t},u.getAxisAngle=function(t,a){var e=2*Math.acos(a[3]),r=Math.sin(e/2);return 0!=r?(t[0]=a[0]/r,t[1]=a[1]/r,t[2]=a[2]/r):(t[0]=1,t[1]=0,t[2]=0),e},u.add=i.add,u.multiply=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3],u=e[0],l=e[1],s=e[2],c=e[3];return t[0]=r*c+i*u+n*s-o*l,t[1]=n*c+i*l+o*u-r*s,t[2]=o*c+i*s+r*l-n*u,t[3]=i*c-r*u-n*l-o*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,a,e){e*=.5;var r=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l+i*u,t[1]=n*l+o*u,t[2]=o*l-n*u,t[3]=i*l-r*u,t},u.rotateY=function(t,a,e){e*=.5;var r=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l-o*u,t[1]=n*l+i*u,t[2]=o*l+r*u,t[3]=i*l-n*u,t},u.rotateZ=function(t,a,e){e*=.5;var r=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l+n*u,t[1]=n*l-r*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},u.calculateW=function(t,a){var e=a[0],r=a[1],n=a[2];return t[0]=e,t[1]=r,t[2]=n,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-n*n)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,a,e,r){var n,o,i,u,l,s=a[0],c=a[1],f=a[2],h=a[3],M=e[0],d=e[1],m=e[2],v=e[3];return o=s*M+c*d+f*m+h*v,o<0&&(o=-o,M=-M,d=-d,m=-m,v=-v),1-o>1e-6?(n=Math.acos(o),i=Math.sin(n),u=Math.sin((1-r)*n)/i,l=Math.sin(r*n)/i):(u=1-r,l=r),t[0]=u*s+l*M,t[1]=u*c+l*d,t[2]=u*f+l*m,t[3]=u*h+l*v,t},u.sqlerp=function(){var t=u.create(),a=u.create();return function(e,r,n,o,i,l){return u.slerp(t,r,i,l),u.slerp(a,n,o,l),u.slerp(e,t,a,2*l*(1-l)),e}}(),u.invert=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=e*e+r*r+n*n+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-n*u,t[3]=o*u,t},u.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,a){var e,r=a[0]+a[4]+a[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(a[5]-a[7])*e,t[1]=(a[6]-a[2])*e,t[2]=(a[1]-a[3])*e;else{var n=0;a[4]>a[0]&&(n=1),a[8]>a[3*n+n]&&(n=2);var o=(n+1)%3,i=(n+2)%3;e=Math.sqrt(a[3*n+n]-a[3*o+o]-a[3*i+i]+1),t[n]=.5*e,e=.5/e,t[3]=(a[3*o+i]-a[3*i+o])*e,t[o]=(a[3*o+n]+a[3*n+o])*e,t[i]=(a[3*i+n]+a[3*n+i])*e}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,a,e){"use strict";var r=e(3),n={};n.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var a=new r.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},n.fromValues=function(t,a,e){var n=new r.ARRAY_TYPE(3);return n[0]=t,n[1]=a,n[2]=e,n},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},n.set=function(t,a,e,r){return t[0]=a,t[1]=e,t[2]=r,t},n.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t},n.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t},n.sub=n.subtract,n.multiply=function(t,a,e){return t[0]=a[0]*e[0],t[1]=a[1]*e[1],t[2]=a[2]*e[2],t},n.mul=n.multiply,n.divide=function(t,a,e){return t[0]=a[0]/e[0],t[1]=a[1]/e[1],t[2]=a[2]/e[2],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},n.min=function(t,a,e){return t[0]=Math.min(a[0],e[0]),t[1]=Math.min(a[1],e[1]),t[2]=Math.min(a[2],e[2]),t},n.max=function(t,a,e){return t[0]=Math.max(a[0],e[0]),t[1]=Math.max(a[1],e[1]),t[2]=Math.max(a[2],e[2]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},n.scale=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t},n.scaleAndAdd=function(t,a,e,r){return t[0]=a[0]+e[0]*r,t[1]=a[1]+e[1]*r,t[2]=a[2]+e[2]*r,t},n.distance=function(t,a){var e=a[0]-t[0],r=a[1]-t[1],n=a[2]-t[2];return Math.sqrt(e*e+r*r+n*n)},n.dist=n.distance,n.squaredDistance=function(t,a){var e=a[0]-t[0],r=a[1]-t[1],n=a[2]-t[2];return e*e+r*r+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],e=t[1],r=t[2];return Math.sqrt(a*a+e*e+r*r)},n.len=n.length,n.squaredLength=function(t){var a=t[0],e=t[1],r=t[2];return a*a+e*e+r*r},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},n.normalize=function(t,a){var e=a[0],r=a[1],n=a[2],o=e*e+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},n.cross=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=e[0],u=e[1],l=e[2];return t[0]=n*l-o*u,t[1]=o*i-r*l,t[2]=r*u-n*i,t},n.lerp=function(t,a,e,r){var n=a[0],o=a[1],i=a[2];return t[0]=n+r*(e[0]-n),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t},n.hermite=function(t,a,e,r,n,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=a[0]*u+e[0]*l+r[0]*s+n[0]*c,t[1]=a[1]*u+e[1]*l+r[1]*s+n[1]*c,t[2]=a[2]*u+e[2]*l+r[2]*s+n[2]*c,t},n.bezier=function(t,a,e,r,n,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,f=3*l*i,h=l*o;return t[0]=a[0]*s+e[0]*c+r[0]*f+n[0]*h,t[1]=a[1]*s+e[1]*c+r[1]*f+n[1]*h,t[2]=a[2]*s+e[2]*c+r[2]*f+n[2]*h,t},n.random=function(t,a){a=a||1;var e=2*r.RANDOM()*Math.PI,n=2*r.RANDOM()-1,o=Math.sqrt(1-n*n)*a;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=n*a,t},n.transformMat4=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=e[3]*r+e[7]*n+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*r+e[4]*n+e[8]*o+e[12])/i,t[1]=(e[1]*r+e[5]*n+e[9]*o+e[13])/i,t[2]=(e[2]*r+e[6]*n+e[10]*o+e[14])/i,t},n.transformMat3=function(t,a,e){var r=a[0],n=a[1],o=a[2];return t[0]=r*e[0]+n*e[3]+o*e[6],t[1]=r*e[1]+n*e[4]+o*e[7],t[2]=r*e[2]+n*e[5]+o*e[8],t},n.transformQuat=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=e[0],u=e[1],l=e[2],s=e[3],c=s*r+u*o-l*n,f=s*n+l*r-i*o,h=s*o+i*n-u*r,M=-i*r-u*n-l*o;return t[0]=c*s+M*-i+f*-l-h*-u,t[1]=f*s+M*-u+h*-i-c*-l,t[2]=h*s+M*-l+c*-u-f*-i,t},n.rotateX=function(t,a,e,r){var n=[],o=[];return n[0]=a[0]-e[0],n[1]=a[1]-e[1],n[2]=a[2]-e[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateY=function(t,a,e,r){var n=[],o=[];return n[0]=a[0]-e[0],n[1]=a[1]-e[1],n[2]=a[2]-e[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateZ=function(t,a,e,r){var n=[],o=[];return n[0]=a[0]-e[0],n[1]=a[1]-e[1],n[2]=a[2]-e[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.forEach=function(){var t=n.create();return function(a,e,r,n,o,i){var u,l;for(e||(e=3),r||(r=0),l=n?Math.min(n*e+r,a.length):a.length,u=r;u<l;u+=e)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],o(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2];return a}}(),n.angle=function(t,a){var e=n.fromValues(t[0],t[1],t[2]),r=n.fromValues(a[0],a[1],a[2]);n.normalize(e,e),n.normalize(r,r);var o=n.dot(e,r);return o>1?0:Math.acos(o)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},n.equals=function(t,a){var e=t[0],n=t[1],o=t[2],i=a[0],u=a[1],l=a[2];return Math.abs(e-i)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=n},function(t,a,e){"use strict";var r=e(3),n={};n.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var a=new r.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},n.fromValues=function(t,a,e,n){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=e,o[3]=n,o},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},n.set=function(t,a,e,r,n){return t[0]=a,t[1]=e,t[2]=r,t[3]=n,t},n.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t},n.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t},n.sub=n.subtract,n.multiply=function(t,a,e){return t[0]=a[0]*e[0],t[1]=a[1]*e[1],t[2]=a[2]*e[2],t[3]=a[3]*e[3],t},n.mul=n.multiply,n.divide=function(t,a,e){return t[0]=a[0]/e[0],t[1]=a[1]/e[1],t[2]=a[2]/e[2],t[3]=a[3]/e[3],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},n.min=function(t,a,e){return t[0]=Math.min(a[0],e[0]),t[1]=Math.min(a[1],e[1]),t[2]=Math.min(a[2],e[2]),t[3]=Math.min(a[3],e[3]),t},n.max=function(t,a,e){return t[0]=Math.max(a[0],e[0]),t[1]=Math.max(a[1],e[1]),t[2]=Math.max(a[2],e[2]),t[3]=Math.max(a[3],e[3]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},n.scale=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t},n.scaleAndAdd=function(t,a,e,r){return t[0]=a[0]+e[0]*r,t[1]=a[1]+e[1]*r,t[2]=a[2]+e[2]*r,t[3]=a[3]+e[3]*r,t},n.distance=function(t,a){var e=a[0]-t[0],r=a[1]-t[1],n=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(e*e+r*r+n*n+o*o)},n.dist=n.distance,n.squaredDistance=function(t,a){var e=a[0]-t[0],r=a[1]-t[1],n=a[2]-t[2],o=a[3]-t[3];return e*e+r*r+n*n+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],e=t[1],r=t[2],n=t[3];return Math.sqrt(a*a+e*e+r*r+n*n)},n.len=n.length,n.squaredLength=function(t){var a=t[0],e=t[1],r=t[2],n=t[3];return a*a+e*e+r*r+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},n.normalize=function(t,a){var e=a[0],r=a[1],n=a[2],o=a[3],i=e*e+r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=r*i,t[2]=n*i,t[3]=o*i),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},n.lerp=function(t,a,e,r){var n=a[0],o=a[1],i=a[2],u=a[3];return t[0]=n+r*(e[0]-n),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t[3]=u+r*(e[3]-u),t},n.random=function(t,a){return a=a||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),n.normalize(t,t),n.scale(t,t,a),t},n.transformMat4=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=a[3];return t[0]=e[0]*r+e[4]*n+e[8]*o+e[12]*i,t[1]=e[1]*r+e[5]*n+e[9]*o+e[13]*i,t[2]=e[2]*r+e[6]*n+e[10]*o+e[14]*i,t[3]=e[3]*r+e[7]*n+e[11]*o+e[15]*i,t},n.transformQuat=function(t,a,e){var r=a[0],n=a[1],o=a[2],i=e[0],u=e[1],l=e[2],s=e[3],c=s*r+u*o-l*n,f=s*n+l*r-i*o,h=s*o+i*n-u*r,M=-i*r-u*n-l*o;return t[0]=c*s+M*-i+f*-l-h*-u,t[1]=f*s+M*-u+h*-i-c*-l,t[2]=h*s+M*-l+c*-u-f*-i,t[3]=a[3],t},n.forEach=function(){var t=n.create();return function(a,e,r,n,o,i){var u,l;for(e||(e=4),r||(r=0),l=n?Math.min(n*e+r,a.length):a.length,u=r;u<l;u+=e)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],t[3]=a[u+3],o(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2],a[u+3]=t[3];return a}}(),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},n.equals=function(t,a){var e=t[0],n=t[1],o=t[2],i=t[3],u=a[0],l=a[1],s=a[2],c=a[3];return Math.abs(e-u)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=n},function(t,a,e){"use strict";var r=e(3),n={};n.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var a=new r.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},n.fromValues=function(t,a){var e=new r.ARRAY_TYPE(2);return e[0]=t,e[1]=a,e},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},n.set=function(t,a,e){return t[0]=a,t[1]=e,t},n.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t},n.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t},n.sub=n.subtract,n.multiply=function(t,a,e){return t[0]=a[0]*e[0],t[1]=a[1]*e[1],t},n.mul=n.multiply,n.divide=function(t,a,e){return t[0]=a[0]/e[0],t[1]=a[1]/e[1],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},n.min=function(t,a,e){return t[0]=Math.min(a[0],e[0]),t[1]=Math.min(a[1],e[1]),t},n.max=function(t,a,e){return t[0]=Math.max(a[0],e[0]),t[1]=Math.max(a[1],e[1]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},n.scale=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t},n.scaleAndAdd=function(t,a,e,r){return t[0]=a[0]+e[0]*r,t[1]=a[1]+e[1]*r,t},n.distance=function(t,a){var e=a[0]-t[0],r=a[1]-t[1];return Math.sqrt(e*e+r*r)},n.dist=n.distance,n.squaredDistance=function(t,a){var e=a[0]-t[0],r=a[1]-t[1];return e*e+r*r},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],e=t[1];return Math.sqrt(a*a+e*e)},n.len=n.length,n.squaredLength=function(t){var a=t[0],e=t[1];return a*a+e*e},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},n.normalize=function(t,a){var e=a[0],r=a[1],n=e*e+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=a[0]*n,t[1]=a[1]*n),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},n.cross=function(t,a,e){var r=a[0]*e[1]-a[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,a,e,r){var n=a[0],o=a[1];return t[0]=n+r*(e[0]-n),t[1]=o+r*(e[1]-o),t},n.random=function(t,a){a=a||1;var e=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t},n.transformMat2=function(t,a,e){var r=a[0],n=a[1];return t[0]=e[0]*r+e[2]*n,t[1]=e[1]*r+e[3]*n,t},n.transformMat2d=function(t,a,e){var r=a[0],n=a[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t},n.transformMat3=function(t,a,e){var r=a[0],n=a[1];return t[0]=e[0]*r+e[3]*n+e[6],t[1]=e[1]*r+e[4]*n+e[7],t},n.transformMat4=function(t,a,e){var r=a[0],n=a[1];return t[0]=e[0]*r+e[4]*n+e[12],t[1]=e[1]*r+e[5]*n+e[13],t},n.forEach=function(){var t=n.create();return function(a,e,r,n,o,i){var u,l;for(e||(e=2),r||(r=0),l=n?Math.min(n*e+r,a.length):a.length,u=r;u<l;u+=e)t[0]=a[u],t[1]=a[u+1],o(t,t,i),a[u]=t[0],a[u+1]=t[1];return a}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},n.equals=function(t,a){var e=t[0],n=t[1],o=a[0],i=a[1];return Math.abs(e-o)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))},t.exports=n},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),l=e(2),s=e(13),c=r(s),f=e(14),h=r(f),M=function(t){function a(t){n(this,a);var e=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.viewportWidth=t&&t.viewportWidth||512,e.viewportHeight=t&&t.viewportHeight||512,e.setFlag(h["default"].CAMERA),e.viewMatrix=l.mat4.create(),e.projMatrix=l.mat4.create(),e}return i(a,t),u(a,[{key:"updateProjection",value:function(){}},{key:"updateView",value:function(){l.mat4.invert(this.viewMatrix,this.modelMatrix)}},{key:"updateViewport",value:function(t,a){var e=this.viewportWidth,r=this.viewportHeight;this.viewportWidth=t,this.viewportHeight=a,e===t&&r===a||this.updateProjection()}}]),a}(c["default"]);a["default"]=M},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}function o(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),u=e(2),l=e(14),s=r(l),c=e(15),f=r(c),h={ENTERED:1},M=function(){function t(a){o(this,t),this.flags=0,this.internalFlags=0,this.stage=null,this.parent=null,this.children=null,this.pose=new f["default"],this.modelMatrix=u.mat4.create(),this.behaviors=a&&a.behaviors||null,this.drawable=null,a&&a.drawable&&this.setDrawable(a.drawable),this.behaviors&&this.behaviors.length>0&&this.enableFlag(s["default"].UPDATE)}return i(t,[{key:"hasFlag",value:function(t){return this.flags&0!==t}},{key:"enableFlag",value:function(t){this.flags|=t,this.stage&&(this.stage.needsRebuild=!0)}},{key:"disableFlag",value:function(t){this.flags&=~t,this.stage&&(this.stage.needsRebuild=!0)}},{key:"hasInternalFlag",value:function(t){return this.internalFlags&0!==t}},{key:"enableInternalFlag",value:function(t){this.internalFlags|=t}},{key:"disableInternalFlag",value:function(t){this.internalFlags&=~t}},{key:"setDrawable",value:function(t){this.drawable=t,this.enableFlag(s["default"].DRAW)}},{key:"addChild",value:function(t){if(null!==t.parent)throw new Error("child already parented");t.stage=this.stage,t.parent=this,this.children=this.children||[],this.children.push(t),this.hasInternalFlag(h.ENTERED)&&t.traverse(function(t){return t.enter()})}},{key:"removeChild",value:function(t){if(t.parent!==this)throw new Error("not yo babies momma");t.stage=null,t.parent=null;var a=this.children.indexOf(t);a>=0&&this.children.splice(a,1),this.hasInternalFlag(h.ENTERED)&&t.traverse(function(t){return t.exit()})}},{key:"removeCompleteBehaviors",value:function(){for(var t=this.behaviors.length;t>=0;--t)this.behaviors[t].isComplete&&this.behaviors.splice(t,1)}},{key:"enter",value:function(){if(this.hasInternalFlag(h.ENTERED))throw new Error("invalid entered state");if(this.enableInternalFlag(h.ENTERED),this.behaviors){for(var t=0;t<this.behaviors.length;++t)this.behaviors[t].enter(this);this.removeCompleteBehaviors()}}},{key:"exit",value:function(){if(!this.hasInternalFlag(h.ENTERED))throw new Error("invalid entered state");if(this.behaviors){for(var t=0;t<this.behaviors.length;++t)this.behaviors[t].exit(this);this.removeCompleteBehaviors()}this.disableInternalFlag(h.ENTERED)}},{key:"traverse",value:function(t){for(var a=[this];a.length>0;){var e=a.pop();t(e),e.children&&a.push.apply(a,n(e.children))}}},{key:"preUpdate",value:function(t){if(this.behaviors){for(var a=0;a<this.behaviors.length;++a)this.behaviors[a].preUpdate(this,t);this.removeCompleteBehaviors()}}},{key:"updateMatrix",value:function(){this.pose.updateMatrix(),this.parent?u.mat4.multiply(this.modelMatrix,this.parent.modelMatrix,this.pose.matrix):u.mat4.copy(this.modelMatrix,this.pose.matrix)}},{key:"postUpdate",value:function(t){if(this.behaviors)for(var a=0;a<this.behaviors.length;++a)this.behaviors[a].postUpdate(this,t);this.removeCompleteBehaviors()}},{key:"draw",value:function(t){this.drawable&&(t.modelMatrix=this.modelMatrix,this.drawable.draw(t))}},{key:"setPose",value:function(t){t.copyTo(this.pose)}},{key:"moveTo",value:function(t,a,e){u.vec3.set(this.pose.position,t,a,e)}},{key:"lookAt",value:function(t,a,e){u.mat4.lookAt(this.pose.matrix,this.pose.position,u.vec3.fromValues(t,a,e),u.vec3.fromValues(0,1,0)),u.mat4.getRotation(this.pose.orientation,this.pose.matrix),u.quat.invert(this.pose.orientation,this.pose.orientation)}}]),t}();a["default"]=M},function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={PRE_UPDATE:1,MATRIX_UPDATE:2,POST_UPDATE:4,DRAW:8,CAMERA:16,LIGHT:32,SHADOW_CASTER:64}},function(t,a,e){"use strict";function r(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),o=e(2),i=function(){function t(a){r(this,t),this.orientation=a.orientation||o.quat.create(),this.position=a.position||o.vec3.create(),this.scale=a.scale||o.vec3.fromValues(1,1,1),this.matrix=o.mat4.create()}return n(t,[{key:"updateMatrix",value:function(){o.mat4.fromRotationTranslationScale(this.matrix,this.orientation,this.position,this.scale)}},{key:"lerp",value:function(t,a,e){o.quat.slerp(this.orientation,t.orientation,a.orientation,e),o.vec3.lerp(this.position,t.position,a.position,e),o.vec3.lerp(this.scale,t.scale,a.scale,e)}},{key:"copyTo",value:function(t){o.quat.copy(t.orientation,this.orientation),o.vec3.copy(t.position,this.position),o.vec3.copy(t.scale,this.scale)}}]),t}();a["default"]=i},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),l=e(2),s=e(12),c=r(s),f=function(t){function a(t){n(this,a);var e=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.left=t&&t.left||0,e.top=t&&t.top||0,e.right=t&&t.right||null,e.bottom=t&&t.bottom||null,e.near=t&&t.near||0,e.far=t&&t.far||1,e.updateProjection(),e}return i(a,t),u(a,[{key:"updateProjection",value:function(){l.mat4.ortho(this.projMatrix,this.left,null===this.right?this.left+this.viewportWidth:this.right,this.top,null===this.bottom?this.top+this.viewportHeight:this.bottom,this.near,this.far)}}]),a}(c["default"]);a["default"]=f},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),l=e(2),s=e(12),c=r(s),f=function(t){function a(t){n(this,a);var e=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.fov=t&&t.fov||Math.PI/2,e.near=t&&t.near||1,e.far=t&&t.far||1e3,e.updateProjection(),e}return i(a,t),u(a,[{key:"updateProjection",value:function(){l.mat4.perspective(this.projMatrix,this.fov,this.viewportWidth/this.viewportHeight,this.near,this.far)}}]),a}(c["default"]);a["default"]=f},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function");
}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var u=e(16),l=r(u),s=e(14),c=r(s),f=function(t){function a(t){n(this,a);var e=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.setFlag(c["default"].LIGHT),e}return i(a,t),a}(l["default"]);a["default"]=f},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var u=e(13),l=r(u),s=e(14),c=r(s),f=function(t){function a(t){n(this,a);var e=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.setFlag(c["default"].LIGHT),e}return i(a,t),a}(l["default"]);a["default"]=f},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var u=e(17),l=r(u),s=e(14),c=r(s),f=function(t){function a(t){n(this,a);var e=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.setFlag(c["default"].LIGHT),e}return i(a,t),a}(l["default"]);a["default"]=f},function(t,a){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),n=function(){function t(){e(this,t),this.complete=!1}return r(t,[{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"enter",value:function(){}},{key:"exit",value:function(){}},{key:"preUpdate",value:function(){}},{key:"postUpdate",value:function(){}}]),t}();a["default"]=n},function(t,a){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),n=function(){function t(a){e(this,t),this.stage=a.stage,this.camera=a.camera,this.target=a.target}return r(t,[{key:"update",value:function(t,a){this.stage.lastFrame<a&&(this.state.lastFrame=a,this.stage.update(t))}},{key:"draw",value:function(t){var a={time:t,camera:this.camera};this.stage.draw(a)}}]),t}();a["default"]=n},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function o(t,a){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?t:a}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(t,a):t.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var u=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),l=e(13),s=r(l),c=e(14),f=r(c),h=function(t){function a(){n(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));t.stage=t,t.needsRebuild=!1,t.lastFrame=0,t.actorFlagKeys=Object.keys(f["default"]),t.actorFlags=t.actorFlagKeys.map(function(t){return f["default"][t]}),t.actorFlagLists={};for(var e=0;e<t.actorFlags.length;++e)t.actorFlagLists[t.actorFlagKeys[e]]=[];return t.enter(),t}return i(a,t),u(a,[{key:"rebuild",value:function(){for(var t=this,a=0;a<this.actorFlags.length;++a)this.actorFlagLists[this.actorFlagKeys[a]].length=0;this.traverse(function(a){for(var e=0;e<t.actorFlagKeys.length;++e)a.hasFlag(t.actorFlags[e])&&t.actorFlagLists[t.actorFlagKeys[e]].push(a)})}},{key:"update",value:function(t){this.needsRebuild&&this.rebuild();var a=void 0,e=this.actorFlagLists.PRE_UPDATE,r=e.len;for(a=0;a<r;++a)e[a].preUpdate(t);for(e=this.actorFlagLists.MATRIX_UPDATE,r=e.len,a=0;a<r;++a)e[a].updateMatrix(t);for(e=this.actorFlagLists.CAMERA,r=e.len,a=0;a<r;++a)e[a].updateView();for(e=this.actorFlagLists.POST_UPDATE,r=e.len,a=0;a<r;++a)e[a].postUpdate(t)}},{key:"draw",value:function(t){for(var a=this.actorFlagLists.DRAW,e=a.len,r=0;r<e;++r)a[r].draw(t)}}]),a}(s["default"]);a["default"]=h},function(t,a){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),n=function(){function t(a){e(this,t),this.layers=[],this.continuous=!0,this.tickCallback=this.tick.bind(this),this.frame=0,this.initWGL(a)}return r(t,[{key:"tick",value:function(t){this.resetState(),this.frame++;for(var a=0;a<this.layers.length;a++)this.layers[a].update(t,this.frame);for(var e=0;e<this.layers.length;e++)this.layers[e].draw(t);this.continuous&&window.requestAnimationFrame(this.tickCallback)}},{key:"initWGL",value:function(t){return t||this}},{key:"resetState",value:function(){return this}}]),t}();a["default"]=n},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),i=e(26),u=r(i),l=e(27),s=r(l),c=function(){function t(a,e,r,o){n(this,t),this.gl=a,this.material=e,this.vertexBuffer=r,this.indexBuffer=o instanceof u["default"]?o:null,this.primitiveType=this.indexBuffer?this.indexBuffer.type:o}return o(t,[{key:"draw",value:function(t){this.material.use(t),this.vertexBuffer.use(this.material.attribLocations),this.indexBuffer&&this.indexBuffer.use();var a=this.primitiveType===s["default"].LINES?this.gl.LINES:this.gl.TRIANGLES;if(this.indexBuffer){var e=this.indexBuffer.numPrimitives*this.primitiveType===s["default"].LINES?2:3;this.gl.drawElements(a,e,this.gl.UNSIGNED_SHORT,0)}else this.gl.drawArrays(a,0,this.vertexBuffer.numVertices)}}]),t}();a["default"]=c},function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),i=e(27),u=r(i),l=function(){function t(a,e,r){n(this,t),this.gl=a,this.primitiveType=e,this.numPrimitives=r,this.array=new Float32Array(r*(e===u["default"].LINES?2:3)),this.buffer=a.createBuffer(),this.dirty=!0}return o(t,[{key:"set",value:function(t,a){this.dirty=!0;var e=t;this.primitiveType===u["default"].LINES?(e*=2,this.array[e++]=a[0],this.array[e]=a[1]):(e*=3,this.array[e++]=a[0],this.array[e++]=a[1],this.array[e]=a[2])}},{key:"get",value:function(t){var a=t;return this.primitiveType===u["default"].LINES?(a*=2,[this.array[a],this.array[a+1]]):(a*=3,[this.array[a],this.array[a+1],this.array[a+2]])}},{key:"use",value:function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer),this.ensureUploaded()}},{key:"ensureUploaded",value:function(){this.dirty&&this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.array,this.gl.STATIC_DRAW)}}]),t}();a["default"]=l},function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={LINES:0,TRIANGLES:1}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e(2);a["default"]={u_time:{allocate:function(){return 0},compute:function(t){return t.time}},u_modelViewProj:{allocate:function(){return r.mat4.create()},compute:function(t,a){return r.mat4.multiply(a,t.viewMatrix,t.modelMatrix),r.mat4.multiply(a,t.projMatrix,a),a}},u_modelView:{allocate:function(){return r.mat4.create()},compute:function(t,a){return r.mat4.multiply(a,t.viewMatrix,t.modelMatrix),a}},u_viewProj:{allocate:function(){return r.mat4.create()},compute:function(t,a){return r.mat4.multiply(a,t.projMatrix,t.viewMatrix),a}},u_model:{allocate:function(){return r.mat4.create()},compute:function(t,a){return r.mat4.copy(a,t.modelMatrix),a}},u_view:{allocate:function(){return r.mat4.create()},compute:function(t,a){return r.mat4.copy(a,t.viewMatrix),a}},u_proj:{allocate:function(){return r.mat4.create()},compute:function(t,a){return r.mat4.copy(a,t.projMatrix),a}}}},function(t,a){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),n=function(){function t(a,r,n){e(this,t),this.gl=a,this.program=this.createProgram(r,n),this.attribInfo=this.getAttributeInfo(),this.uniformInfo=this.getUniformInfo(),this.uniformStorage=this.createUniformStorage(this.uniformInfo)}return r(t,[{key:"use",value:function(t){this.gl.useProgram(this.programInfo.shader),this.computeDynamicUniforms(t),this.setUniforms(this.gl,this.uniformStorage)}},{key:"setUniforms",value:function(){}},{key:"computeDynamicUniforms",value:function(){}},{key:"createProgram",value:function(t,a){var e=this.loadShader(t,this.gl.VERTEX_SHADER),r=this.loadShader(a,this.gl.FRAGMENT_SHADER),n=this.gl.createProgram();if(this.gl.attachShader(n,e),this.gl.attachShader(n,r),this.gl.linkProgram(n),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){var o=this.gl.getProgramInfoLog(n);throw this.gl.deleteProgram(n),new Error(o)}return n}},{key:"loadShader",value:function(t,a){var e=this.gl.createShader(a);if(this.gl.shaderSource(e,t),this.gl.compileShader(e),!this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS)){var r=this.gl.getShaderInfoLog(e);throw this.gl.deleteShader(e),new Error(r)}return e}},{key:"getAttributeInfo",value:function(){for(var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS),a={},e=0;e<t;++e){var r=this.gl.getActiveAttrib(this.program,e);a[r.name]={location:this.gl.getAttribLocation(this.program,r.name),type:r.type,size:r.size}}return a}},{key:"getUniformInfo",value:function(){for(var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS),a={},e=0;e<t;++e){var r=this.gl.getActiveUniform(this.program,e);a[r.name]={location:this.gl.getUniformLocation(this.program,r.name),type:r.type,size:r.size}}return a}}]),t}();a["default"]=n},function(t,a){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(a,e,r){return e&&t(a.prototype,e),r&&t(a,r),a}}(),n=function(){function t(a,r,n){e(this,t),this.gl=a,this.vertexFormat=r,this.vertexSize=r.reduce(function(t){return t.size},0),this.numVertices=n,this.array=new Float32Array(this.vertexSize.size*n),this.buffer=a.createBuffer(),this.dirty=!0}return r(t,[{key:"set",value:function(t,a){this.dirty=!0;for(var e=this.vertexSize*t,r=0;r<this.vertexFormat.length;++r)for(var n=this.vertexFormat[r],o=a[n.name],i=0;i<n.size;++i)this.array[e++]=o[i]}},{key:"get",value:function(t){for(var a=this.vertexSize*t,e={},r=0;r<this.vertexFormat.length;++r){for(var n=this.vertexFormat[r],o=[],i=0;i<n.size;++i)o.push(this.array[a++]);e[n.name]=o}return e}},{key:"use",value:function(t){if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.ensureUploaded(),t)for(var a=0,e=4*this.vertexSize,r=0;r<this.vertexFormat.length;++r){var n=t[this.vertexFormat[r].name];void 0!==n&&(this.gl.enableVertexAttribArray(n.location),this.gl.vertexAttribPointer(n.location,this.vertexFormat[r].size,this.gl.FLOAT,!1,e,a)),a+=4*this.vertexFormat[r].size}}},{key:"ensureUploaded",value:function(){this.dirty&&this.gl.bufferData(this.gl.ARRAY_BUFFER,this.array,this.gl.STATIC_DRAW)}}]),t}();a["default"]=n}])});
//# sourceMappingURL=theater.js.map